{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/Desktop/Sylver/CODE%20PROJECTS/Nextjs%20Projects/Insight%20Nova%20Tech/lib/supabaseServer.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\n// IMPORTANT: These are server-only environment variables.\n// Do not expose them to the browser!\nconst supabaseUrl = process.env.SUPABASE_URL\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseUrl) {\n  throw new Error(\"Missing environment variable: SUPABASE_URL\")\n}\n\nif (!supabaseServiceRoleKey) {\n  throw new Error(\"Missing environment variable: SUPABASE_SERVICE_ROLE_KEY\")\n}\n\n// Note: this client is a server-side-only client that uses the service_role_key\n// and should never be exposed to the browser.\nexport const supabaseServer = createClient(supabaseUrl, supabaseServiceRoleKey)\n"],"names":[],"mappings":";;;;AAAA;;AAEA,0DAA0D;AAC1D,qCAAqC;AACrC,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY;AAC5C,MAAM,yBAAyB,QAAQ,GAAG,CAAC,yBAAyB;AAEpE,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI,CAAC,wBAAwB;IAC3B,MAAM,IAAI,MAAM;AAClB;AAIO,MAAM,iBAAiB,IAAA,gMAAY,EAAC,aAAa"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/Desktop/Sylver/CODE%20PROJECTS/Nextjs%20Projects/Insight%20Nova%20Tech/app/api/project-inquiry/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { supabaseServer } from '@/lib/supabaseServer'\n\nexport async function POST(req: Request) {\n  try {\n    const body = await req.json()\n\n    const {\n      firstName,\n      lastName,\n      email,\n      company,\n      phone,\n      budget,\n      projectType,\n      message,\n    } = body\n\n    // Basic validation\n    if (!firstName || !lastName || !email || !projectType || !message) {\n      return NextResponse.json(\n        { message: 'Missing required fields' },\n        { status: 400 }\n      )\n    }\n\n    const { error } = await supabaseServer\n      .from('project_inquiries')\n      .insert({\n        first_name: firstName,\n        last_name: lastName,\n        email,\n        company,\n        phone,\n        budget,\n        project_type: projectType,\n        message,\n      })\n\n    if (error) {\n      // Duplicate email (Postgres unique violation)\n      if (error.code === '23505') {\n        return NextResponse.json(\n          { message: 'This email has already submitted an inquiry.' },\n          { status: 409 }\n        )\n      }\n\n      console.error('Supabase error:', error)\n\n      return NextResponse.json(\n        { message: 'Something went wrong. Please try again later.' },\n        { status: 500 }\n      )\n    }\n\n    return NextResponse.json(\n      { message: 'Inquiry submitted successfully' },\n      { status: 200 }\n    )\n  } catch (err) {\n    console.error('API crash:', err)\n\n    // ðŸ”´ THIS IS THE IMPORTANT PART\n    // Ensures we NEVER return HTML\n    return NextResponse.json(\n      { message: 'Invalid request or server error' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,MAAM,EACJ,SAAS,EACT,QAAQ,EACR,KAAK,EACL,OAAO,EACP,KAAK,EACL,MAAM,EACN,WAAW,EACX,OAAO,EACR,GAAG;QAEJ,mBAAmB;QACnB,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,SAAS,CAAC,eAAe,CAAC,SAAS;YACjE,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA0B,GACrC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yIAAc,CACnC,IAAI,CAAC,qBACL,MAAM,CAAC;YACN,YAAY;YACZ,WAAW;YACX;YACA;YACA;YACA;YACA,cAAc;YACd;QACF;QAEF,IAAI,OAAO;YACT,8CAA8C;YAC9C,IAAI,MAAM,IAAI,KAAK,SAAS;gBAC1B,OAAO,gJAAY,CAAC,IAAI,CACtB;oBAAE,SAAS;gBAA+C,GAC1D;oBAAE,QAAQ;gBAAI;YAElB;YAEA,QAAQ,KAAK,CAAC,mBAAmB;YAEjC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAgD,GAC3D;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAiC,GAC5C;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,cAAc;QAE5B,gCAAgC;QAChC,+BAA+B;QAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAkC,GAC7C;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}